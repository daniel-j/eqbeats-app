// Generated by CoffeeScript 1.6.3
this.App.module('User.Favourites', function(Favourites, App, Backbone, Marionette, $, _) {
  'use strict';
  return Favourites.Controller = App.Controllers.Base.extend({
    initialize: function(options) {
      var favourites, id, user,
        _this = this;
      id = options.id;
      user = App.request("user:entity", id);
      favourites = App.request("user:favourites:entities", id);
      this.layout = this.getLayoutView();
      this.listenTo(this.layout, 'show', function() {
        _this.showUserInfoView(user);
        return _this.showUserFavouritesView(favourites);
      });
      return this.show(this.layout, {
        loading: {
          entities: [user, favourites]
        }
      });
    },
    showUserInfoView: function(user) {
      var infoView;
      infoView = this.getInfoView(user);
      return this.layout.info.show(infoView);
    },
    showUserFavouritesView: function(favourites) {
      var listView;
      listView = this.getFavouritesView(favourites);
      return this.layout.list.show(listView);
    },
    getInfoView: function(user) {
      return new Favourites.Info({
        model: user
      });
    },
    getFavouritesView: function(favourites) {
      return new App.View.Playlist({
        collection: favourites.get('tracks')
      });
    },
    getLayoutView: function() {
      return new Favourites.Layout;
    }
  });
});
