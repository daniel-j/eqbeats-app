// Generated by CoffeeScript 1.6.3
this.App.module('Search.Result', function(Result, App, Backbone, Marionette, $, _) {
  'use strict';
  return Result.Controller = App.Controllers.Base.extend({
    initialize: function(options) {
      var info, query, tracks,
        _this = this;
      query = options.query;
      tracks = App.request("search:tracks:entities", query);
      info = new Backbone.Model({
        query: query
      });
      this.layout = this.getLayoutView();
      this.listenTo(this.layout, 'show', function() {
        _this.showInfoView(info);
        return _this.showTracksView(tracks);
      });
      return this.show(this.layout, {
        loading: {
          entities: tracks
        }
      });
    },
    showInfoView: function(info) {
      var infoView;
      infoView = this.getInfoView(info);
      return this.show(infoView, {
        region: this.layout.info
      });
    },
    showTracksView: function(tracks) {
      var listView;
      listView = this.getTracksView(tracks);
      return this.show(listView, {
        region: this.layout.result
      });
    },
    getInfoView: function(info) {
      return new Result.Info({
        model: info
      });
    },
    getTracksView: function(tracks) {
      return new App.View.Playlist({
        collection: tracks
      });
    },
    getLayoutView: function() {
      return new Result.Layout;
    }
  });
});
